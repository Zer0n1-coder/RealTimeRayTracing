# 光线追踪基础
回忆一下方程22.1，其中光线被定义为
$$\overrightarrow {q}(t) = \overrightarrow {o} + t\overrightarrow {d},$$
其中$\overrightarrow {o}$是光线原点，$\overrightarrow {d}$是单位化后的光线方向，t是沿光线方向的距离。请注意，我们在这里使用$\overrightarrow {q}$而不是$\overrightarrow {r}$是为了区分接下来会使用到的右向量$\overrightarrow {r}$。光线追踪可以用**trace**()和**shade**()两个函数来进行描述。其核心的几何算法位于**trace**()中，**trace**()负责查找光线与场景中的片元之间最近的交点，并通过调用**shader**()返回光线的颜色。大多数情况下，我们都想找到一个t>0相交测试结果。对于构造实体几何(constructive solid geometry)，我们通常也需要负距离的交点(位于光线后面的交点)。
